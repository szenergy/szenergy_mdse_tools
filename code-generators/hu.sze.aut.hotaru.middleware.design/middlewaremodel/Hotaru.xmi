<?xml version="1.0" encoding="UTF-8"?>
<statepubsubmodel:MiddlewareNetwork
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:statepubsubmodel="http://jkk.sze.hu/statepubsubmodel"
    xsi:schemaLocation="http://jkk.sze.hu/statepubsubmodel ../../hu.sze.jkk.middleware.statepubsub.model/model/statepubsubmodel.ecore">
  <node description=""
      name="hotaru_local_planner"
      implements="//@node.1"
      namespace="hotaru">
    <outputport
        id="final_waypoints"
        estimated_freq="20"
        topic="//@topic.4"/>
    <inputport
        id="sub_base_waypoints"
        estimated_freq="10"
        topic="//@topic.0"
        sync_function_name="reconstructWaypoints"
        synchronizesState="//@node.0/@continousstate.0"/>
    <inputport
        id="sub_replan_request_sig"
        topic="//@topic.5"/>
    <inputport
        id="sub_current_pose"
        estimated_freq="10"
        topic="//@topic.3"
        sync_function_name="synchWithPose"
        synchronizesState="//@node.0/@continousstate.0"/>
    <inputport
        id="sub_current_velocity"
        estimated_freq="10"
        topic="//@topic.2"
        synchronizesState="//@node.0/@continousstate.0"/>
    <inputport
        id="sub_filtered_obstacles"
        topic="//@topic.6"
        sync_function_name="UpdateObstacles"/>
    <continousstate
        name="sync_state"
        synchronizeWith="//@node.0/@inputport.0 //@node.0/@inputport.2 //@node.0/@inputport.3">
      <workerthread
          freq="20"
          doFunc="execContinousStateUpdate"/>
    </continousstate>
  </node>
  <node name="statemachine_sig_interface">
    <outputport
        id="pub_state_machine_output_signal"
        topic="//@topic.1"/>
  </node>
  <topic portTo="//@node.0/@inputport.0"
      topic_name="base_waypoints"/>
  <topic portFrom="//@node.1/@outputport.0"
      topic_name="state_machine_signal"/>
  <topic portTo="//@node.0/@inputport.3"
      topic_name="current_velocity"/>
  <topic portTo="//@node.0/@inputport.2"
      topic_name="current_pose"/>
  <topic portFrom="//@node.0/@outputport.0"
      topic_name="final_waypoints"/>
  <topic portTo="//@node.0/@inputport.1"
      topic_name="replan_request_sig"/>
  <topic portTo="//@node.0/@inputport.4"
      topic_name="filtered_obstacles"/>
</statepubsubmodel:MiddlewareNetwork>
