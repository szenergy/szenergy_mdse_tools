<?xml version="1.0" encoding="UTF-8"?>
<vehicleconfig:Vehicle
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:vehicleconfig="http://jkk.sze.hu/vehicleconfig"
    xsi:schemaLocation="http://jkk.sze.hu/vehicleconfig ../../hu.sze.jkk.vehicle.config/model/vehicleconfig.ecore"
    name="nissanleaf">
  <kinematicparameters
      wheelbase="2.7"
      rear_track="1.535"
      front_track="1.54"
      height="1.5">
    <wheelparameters
        wheel_radius="0.31623"
        wheel_width="0.26"
        wheel_mass="10.0"/>
    <steeringparameters
        inner_angle="28.0"
        outer_angle="30.0"/>
  </kinematicparameters>
  <rosconfiguration>
    <rostopicconfiguration
        xsi:type="vehicleconfig:SteerTopic"
        topicname="steer"
        frequency="100.0">
      <joint_id>0</joint_id>
      <joint_id>1</joint_id>
    </rostopicconfiguration>
    <rostopicconfiguration
        xsi:type="vehicleconfig:ImuTopic"
        topicname="imu"
        frequency="40.0"/>
    <rostopicconfiguration
        xsi:type="vehicleconfig:OdomTopic"
        topicname="odom"
        frequency="50.0"/>
    <rostopicconfiguration
        xsi:type="vehicleconfig:ThrottleTopic"
        topicname="throttle"
        frequency="100.0">
      <joint_id>3</joint_id>
    </rostopicconfiguration>
    <rostopicconfiguration
        xsi:type="vehicleconfig:LaserTopic"
        topicname="laser/scan"
        frequency="50.0"/>
  </rosconfiguration>
  <nodeconfiguration>
    <computationnode
        xsi:type="vehicleconfig:Odometry"
        callbackqueue="true"
        nodename="odometry_nissan_leaf"
        throttletopic="//@rosconfiguration/@rostopicconfiguration.3"
        steertopic="//@rosconfiguration/@rostopicconfiguration.0"
        odomtopic="//@rosconfiguration/@rostopicconfiguration.2"/>
    <computationnode
        xsi:type="vehicleconfig:VehicleControl"
        callbackqueue="true"
        nodename="gazebo_nissan_leaf"
        steertopic="//@rosconfiguration/@rostopicconfiguration.0"
        throttletopic="//@rosconfiguration/@rostopicconfiguration.3"/>
    <computationnode
        xsi:type="vehicleconfig:IMU"
        nodename="imu_nissan_leaf"
        imutopic="//@rosconfiguration/@rostopicconfiguration.1"
        imusensor="//@sensorconfiguration/@sensor.1"/>
    <computationnode
        xsi:type="vehicleconfig:LaserNode"
        nodename="laser"
        lasertopic="//@rosconfiguration/@rostopicconfiguration.4"
        laser="//@sensorconfiguration/@sensor.0"/>
  </nodeconfiguration>
  <geometrysettings>
    <shell meshpath="Nissan_LEAF_wo_wheels_yellow.obj"
        collisionmesh="Nissan_LEAF_wo_wheels_yellow.obj"
        package="szelectricity_description/meshes/">
      <displacement
          x="-2.15"
          z="-0.4"/>
    </shell>
    <wheelgeometry
        meshpath="NissanKerek.DAE"
        collisionmesh="NissanKerekCollision.obj"
        package="package://szelectricity_description/meshes/">
      <rotation
          yaw="90.0"/>
    </wheelgeometry>
  </geometrysettings>
  <sensorconfiguration>
    <sensor
        xsi:type="vehicleconfig:Laser"
        mass="5.0"
        name="laser_front"
        update_rate="50.0">
      <displacement
          x="2.5"/>
      <distancesettings
          samples="540"
          resolution="0.1"
          min_distance="0.4"
          max_distance="30.0"/>
      <angleparameters
          samples="540"
          resolution="1.0"
          min_angle="-120.0"
          max_angle="120.0"/>
    </sensor>
    <sensor
        xsi:type="vehicleconfig:ImuSensor"
        mass="0.5"
        name="imu_sensor"
        update_rate="45.0">
      <displacement/>
    </sensor>
    <sensor
        xsi:type="vehicleconfig:LIDAR"
        mass="10.0"
        name="vlp16"
        update_rate="10.0"
        max_range="131.0"
        min_range="0.9"
        resolution="0.001">
      <displacement
          x="0.4"
          z="1.2"/>
      <horizontal_angle_param
          samples="2187"
          resolution="1.0"
          min_angle="-180.0"
          max_angle="180.0"/>
      <vertical_angle_param
          samples="16"
          resolution="1.0"
          min_angle="-15.0"
          max_angle="15.0"/>
    </sensor>
    <sensor
        xsi:type="vehicleconfig:GNSS"
        mass="5.0"
        name="gnss_kvh"
        update_rate="10.0">
      <displacement
          x="0.1"
          z="-0.1"/>
      <geolocation
          longitude="17.6283"
          latitude="47.694"
          height="150.0"/>
    </sensor>
    <sensor
        xsi:type="vehicleconfig:Camera"
        mass="10.0"
        name="camera"
        update_rate="10.0"
        type="STEREO">
      <displacement
          x="0.9"
          z="1.1"/>
      <cameraparameters
          width="1920"
          height="1080"
          clip_near="0.3"
          clip_far="100.0"
          horizontal_fov="110.0"/>
    </sensor>
  </sensorconfiguration>
  <transmissionsetup>
    <motor_rear_right
        engineparameters="//@EngineParameters.0"/>
    <motor_rear_left
        engineparameters="//@EngineParameters.0"/>
  </transmissionsetup>
  <EngineParameters
      maxtorque="20.0"/>
  <dynamicparameters>
    <inertialparameters
        cog_ratio="0.43"
        mass="1000.0"/>
    <aerodynamicparameters/>
  </dynamicparameters>
</vehicleconfig:Vehicle>
